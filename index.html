<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              inter: ["Inter", "sans-serif"],
            },
            colors: {
              primary: {
                50: "#eff6ff",
                500: "#3b82f6",
                600: "#2563eb",
                700: "#1d4ed8",
              },
              secondary: {
                500: "#10b981",
                600: "#059669",
              },
            },
          },
        },
      };
    </script>
    <!-- Script para geração de PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="pdf/pdfBasell.js"></script>
    <title>Sistema de Checklist Digital</title>
  </head>
  <body
    class="bg-gradient-to-br from-slate-50 to-blue-50 min-h-screen font-inter"
  >
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="text-center">
          <h1 class="text-4xl font-bold text-gray-900 mb-2">
            Sistema de Checklist Digital
          </h1>
          <p class="text-lg text-gray-600">
            Gestão completa de checklists para veículos
          </p>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="grid grid-cols-1 gap-8">
        <!-- Seção Basell -->
        <div
          class="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden hover:shadow-2xl transition-all duration-300"
        >
          <div
            class="bg-gradient-to-r from-primary-500 to-primary-600 px-8 py-6"
          >
            <div class="flex items-center space-x-3">
              <div class="bg-white/20 rounded-lg p-2">
                <svg
                  class="w-8 h-8 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                  ></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">Checklist Basell</h2>
            </div>
          </div>

          <div class="p-8">
            <p class="text-gray-600 mb-6 leading-relaxed">
              Sistema de verificação pré-operacional para garantir a segurança e
              conformidade dos veículos.
            </p>

            <button
              type="button"
              class="w-full bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl mb-8"
              onclick="window.location.href='basell/basell.html'"
            >
              <span class="flex items-center justify-center space-x-2">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 7l5 5m0 0l-5 5m5-5H6"
                  ></path>
                </svg>
                <span>Iniciar Checklist Basell</span>
              </span>
            </button>

            <!-- Tabela Basell -->
            <div class="overflow-hidden rounded-xl border border-gray-200">
              <div class="bg-gray-50 px-6 py-3 border-b border-gray-200">
                <h3
                  class="text-sm font-semibold text-gray-700 uppercase tracking-wide"
                >
                  Últimos Registros
                </h3>
              </div>
              
              <!-- Mensagens de Status -->
              <div id="loading-message" class="px-6 py-4 text-center text-gray-500" style="display: none;">
                <div class="flex items-center justify-center">
                  <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  Carregando dados...
                </div>
              </div>
              
              <div id="error-message" class="px-6 py-4 text-center text-red-500" style="display: none;">
                Erro ao carregar dados
              </div>
              
              <div class="overflow-x-auto">
                <table class="w-full">
                  <thead class="bg-gray-50">
                    <tr>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Motorista
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Placa
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Data
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Status
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Ações
                      </th>
                    </tr>
                  </thead>
                  <tbody id="basell-table-body" class="bg-white divide-y divide-gray-200">
                    <!-- Os dados serão carregados dinamicamente via JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Seção Manutenção -->
        <div
          class="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden hover:shadow-2xl transition-all duration-300"
        >
          <div
            class="bg-gradient-to-r from-secondary-500 to-secondary-600 px-8 py-6"
          >
            <div class="flex items-center space-x-3">
              <div class="bg-white/20 rounded-lg p-2">
                <svg
                  class="w-8 h-8 text-white"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">
                Checklist Manutenção
              </h2>
            </div>
          </div>

          <div class="p-8">
            <p class="text-gray-600 mb-6 leading-relaxed">
              Sistema completo de inspeção e manutenção preventiva para garantir
              o perfeito funcionamento dos veículos.
            </p>

            <button
              type="button"
              class="w-full bg-gradient-to-r from-secondary-500 to-secondary-600 hover:from-secondary-600 hover:to-secondary-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl mb-8"
              onclick="window.location.href='manutencao/manutencao.html'"
            >
              <span class="flex items-center justify-center space-x-2">
                <svg
                  class="w-5 h-5"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M13 7l5 5m0 0l-5 5m5-5H6"
                  ></path>
                </svg>
                <span>Iniciar Checklist Manutenção</span>
              </span>
            </button>

            <!-- Tabela Manutenção -->
            <div class="overflow-hidden rounded-xl border border-gray-200">
              <div class="bg-gray-50 px-6 py-3 border-b border-gray-200">
                <h3
                  class="text-sm font-semibold text-gray-700 uppercase tracking-wide"
                >
                  Últimos Registros
                </h3>
              </div>
              <div class="overflow-x-auto">
                <table class="w-full">
                  <thead class="bg-gray-50">
                    <tr>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Motorista
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Placa
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Data
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Status
                      </th>
                      <th
                        class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                      >
                        Ações
                      </th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-gray-200">
                    <tr class="hover:bg-gray-50 transition-colors">
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                      >
                        João da Silva
                      </td>
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"
                      >
                        ABC-1234
                      </td>
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                      >
                        01/01/2025
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span
                          class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"
                        >
                          Pendente
                        </span>
                      </td>
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                      >
                        <div class="flex space-x-2">
                          <button
                            class="text-blue-600 hover:text-blue-800 transition-colors"
                            title="Ver mais"
                          >
                            <svg
                              class="w-5 h-5"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                              ></path>
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                              ></path>
                            </svg>
                          </button>
                          <button
                            class="text-red-600 hover:text-red-800 transition-colors"
                            title="Deletar"
                          >
                            <svg
                              class="w-5 h-5"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                              ></path>
                            </svg>
                          </button>
                          <button
                            class="text-green-600 hover:text-green-800 transition-colors"
                            title="Download"
                          >
                            <svg
                              class="w-5 h-5"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                              ></path>
                            </svg>
                          </button>
                        </div>
                      </td>
                    </tr>
                    <tr class="hover:bg-gray-50 transition-colors">
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                      >
                        Maria Oliveira
                      </td>
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"
                      >
                        DEF-5678
                      </td>
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                      >
                        02/01/2025
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span
                          class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"
                        >
                          Concluído
                        </span>
                      </td>
                      <td
                        class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"
                      >
                        <div class="flex space-x-2">
                          <button
                            class="text-blue-600 hover:text-blue-800 transition-colors"
                            title="Ver mais"
                          >
                            <svg
                              class="w-5 h-5"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                              ></path>
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                              ></path>
                            </svg>
                          </button>
                          <button
                            class="text-red-600 hover:text-red-800 transition-colors"
                            title="Deletar"
                          >
                            <svg
                              class="w-5 h-5"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                              ></path>
                            </svg>
                          </button>
                          <button
                            class="text-green-600 hover:text-green-800 transition-colors"
                            title="Download"
                          >
                            <svg
                              class="w-5 h-5"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                              ></path>
                            </svg>
                          </button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="text-center text-gray-500">
          <p>
            &copy; 2025 Sistema de Checklist Digital. Todos os direitos
            reservados.
          </p>
        </div>
      </div>
    </footer>

    <!-- Script principal para gerenciar a tabela -->
    <script src="main.js"></script>

    <script>
      /**
       * Função para fazer download do PDF modelo do checklist Basell
       * @param {string} checklistId - ID do checklist (usado apenas para referência)
       * @param {Event} event - Evento do clique (opcional)
       */
      async function downloadBasellPdf(checklistId, event) {
        let button = null;
        let originalContent = null;

        try {
          // Debug detalhado do carregamento do jsPDF
          console.log("=== DEBUG jsPDF ===");
          console.log("window.jsPDF:", window.jsPDF);
          console.log("typeof window.jsPDF:", typeof window.jsPDF);
          console.log("window.jsPDF?.jsPDF:", window.jsPDF?.jsPDF);
          console.log("typeof window.jsPDF?.jsPDF:", typeof window.jsPDF?.jsPDF);
          
          // Verificar todas as possíveis formas de carregamento
          let jsPDF = null;
          
          if (window.jsPDF && typeof window.jsPDF.jsPDF === 'function') {
            jsPDF = window.jsPDF.jsPDF;
            console.log("jsPDF encontrado em window.jsPDF.jsPDF");
          } else if (window.jsPDF && typeof window.jsPDF === 'function') {
            jsPDF = window.jsPDF;
            console.log("jsPDF encontrado em window.jsPDF");
          } else if (window.jspdf && typeof window.jspdf.jsPDF === 'function') {
            jsPDF = window.jspdf.jsPDF;
            console.log("jsPDF encontrado em window.jspdf.jsPDF");
          }
          
          console.log("jsPDF final:", jsPDF);
          console.log("typeof jsPDF:", typeof jsPDF);
          
          if (!jsPDF || typeof jsPDF !== "function") {
            console.error("jsPDF não foi encontrado em nenhuma das formas esperadas");
            throw new Error(
              "jsPDF não está carregado. Verifique se a biblioteca jsPDF foi incluída."
            );
          }
          
          console.log("jsPDF carregado com sucesso!");

          // Mostrar indicador de carregamento
          if (event && event.target) {
            button = event.target.closest("button");
            if (button) {
              originalContent = button.innerHTML;
              button.disabled = true;
              button.innerHTML = `
                <svg class="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
              `;
            }
          }

          console.log("Iniciando download do PDF modelo para:", checklistId);

          // Gerar PDF modelo com dados de exemplo
          const success = await generateModelBasellPdf();

          if (success) {
            console.log("PDF modelo gerado com sucesso!");
            alert('PDF modelo baixado com sucesso!');
          } else {
            throw new Error("Falha na geração do PDF modelo");
          }
        } catch (error) {
          console.error("Erro ao gerar PDF modelo:", error);
          alert("Erro ao gerar PDF modelo: " + error.message);
        } finally {
          // Restaurar botão
          if (button && originalContent) {
            button.disabled = false;
            button.innerHTML = originalContent;
          }
        }
      }

      /**
       * Gera PDF modelo com dados de exemplo (sem conectar ao banco)
       */
      async function generateModelBasellPdf() {
        try {
          // Dados modelo para demonstração
          const checklistModelo = {
            id: 'modelo-001',
            motorista: 'João Silva Santos',
            placa: 'ABC-1234',
            data: new Date().toLocaleDateString('pt-BR'),
            verifications: [
              { id: 1, status: 'Conforme', observation: 'Pneus em bom estado' },
              { id: 2, status: 'Não Conforme', observation: 'Pastilhas desgastadas' },
              { id: 3, status: 'Conforme', observation: 'Todas as luzes funcionando' },
              { id: 4, status: 'Conforme', observation: 'Espelhos ajustados' },
              { id: 5, status: 'Conforme', observation: 'Direção normal' },
              { id: 6, status: 'Não aplicável', observation: 'Veículo sem suspensão a ar' },
              { id: 7, status: 'Conforme', observation: 'Cintos funcionando' },
              { id: 8, status: 'Conforme', observation: 'Extintor dentro da validade' },
              { id: 9, status: 'Conforme', observation: 'Documentos em ordem' },
              { id: 10, status: 'Conforme', observation: 'Carroceria sem avarias' },
              { id: 11, status: 'Conforme', observation: 'Motor funcionando bem' },
              { id: 12, status: 'Conforme', observation: 'Sistema elétrico OK' },
              { id: 13, status: 'Conforme', observation: 'Carga bem amarrada' },
              { id: 14, status: 'Conforme', observation: 'Veículo liberado' }
            ],
            media: [] // Sem mídia para o modelo
          };

          // Verificar se a função generateBasellPdf está disponível
          if (typeof window.generateBasellPdf === "function") {
            // Usar a função original modificando temporariamente buscarDadosChecklist
            const originalBuscarDados = window.buscarDadosChecklist;
            
            // Substituir temporariamente a função de busca
            window.buscarDadosChecklist = async function(id) {
              return checklistModelo;
            };
            
            const result = await window.generateBasellPdf('modelo');
            
            // Restaurar função original
            if (originalBuscarDados) {
              window.buscarDadosChecklist = originalBuscarDados;
            }
            
            return result;
          } else {
            // Gerar PDF diretamente usando jsPDF
            return await generateSimpleModelPdf(checklistModelo);
          }
        } catch (error) {
          console.error('Erro ao gerar PDF modelo:', error);
          return false;
        }
      }

      /**
       * Gera PDF simples com dados modelo
       */
      async function generateSimpleModelPdf(checklist) {
        try {
          // Usar a mesma lógica de verificação do jsPDF
          let jsPDF = null;
          
          if (window.jsPDF && typeof window.jsPDF.jsPDF === 'function') {
            jsPDF = window.jsPDF.jsPDF;
          } else if (window.jsPDF && typeof window.jsPDF === 'function') {
            jsPDF = window.jsPDF;
          } else if (window.jspdf && typeof window.jspdf.jsPDF === 'function') {
            jsPDF = window.jspdf.jsPDF;
          }
          
          if (!jsPDF || typeof jsPDF !== "function") {
            throw new Error("jsPDF não está disponível");
          }
          
          const pdf = new jsPDF('p', 'mm', 'a4');
          
          // Cabeçalho
          pdf.setFontSize(16);
          pdf.setFont('helvetica', 'bold');
          pdf.text('CHECKLIST BASELL - MODELO', 105, 20, { align: 'center' });
          
          // Informações básicas
          pdf.setFontSize(12);
          pdf.setFont('helvetica', 'normal');
          let y = 40;
          pdf.text(`Motorista: ${checklist.motorista}`, 20, y);
          y += 10;
          pdf.text(`Placa: ${checklist.placa}`, 20, y);
          y += 10;
          pdf.text(`Data: ${checklist.data}`, 20, y);
          y += 20;
          
          // Título da tabela
          pdf.setFont('helvetica', 'bold');
          pdf.text('ITENS DE VERIFICAÇÃO', 20, y);
          y += 15;
          
          // Cabeçalho da tabela
          pdf.setFontSize(10);
          pdf.text('Item', 20, y);
          pdf.text('Status', 100, y);
          pdf.text('Observação', 140, y);
          y += 10;
          
          // Linha separadora
          pdf.line(20, y-2, 190, y-2);
          
          // Itens da verificação
          pdf.setFont('helvetica', 'normal');
          checklist.verifications.forEach((item, index) => {
            if (y > 270) { // Nova página se necessário
              pdf.addPage();
              y = 20;
            }
            
            pdf.text(`${item.id}`, 20, y);
            pdf.text(item.status, 100, y);
            pdf.text(item.observation.substring(0, 25), 140, y);
            y += 8;
          });
          
          // Rodapé
          pdf.setFontSize(8);
          pdf.text('PDF Modelo - Sistema de Checklist Digital', 105, 285, { align: 'center' });
          
          // Salvar
          const nomeArquivo = `checklist-basell-modelo-${new Date().getTime()}.pdf`;
          pdf.save(nomeArquivo);
          
          return true;
        } catch (error) {
          console.error('Erro ao gerar PDF simples:', error);
          return false;
        }
      }

      // Verificar se as dependências estão carregadas quando a página carregar
      document.addEventListener("DOMContentLoaded", function () {
        // Verificar jsPDF com lógica robusta
        console.log("=== VERIFICAÇÃO INICIAL jsPDF ===");
        console.log("window.jsPDF:", window.jsPDF);
        console.log("typeof window.jsPDF:", typeof window.jsPDF);
        
        let jsPDF = null;
        
        if (window.jsPDF && typeof window.jsPDF.jsPDF === 'function') {
          jsPDF = window.jsPDF.jsPDF;
          console.log("✅ jsPDF encontrado em window.jsPDF.jsPDF");
        } else if (window.jsPDF && typeof window.jsPDF === 'function') {
          jsPDF = window.jsPDF;
          console.log("✅ jsPDF encontrado em window.jsPDF");
        } else if (window.jspdf && typeof window.jspdf.jsPDF === 'function') {
          jsPDF = window.jspdf.jsPDF;
          console.log("✅ jsPDF encontrado em window.jspdf.jsPDF");
        }
        
        if (!jsPDF || typeof jsPDF !== "function") {
          console.warn(
            "❌ jsPDF não foi carregado. Os downloads de PDF podem não funcionar."
          );
        } else {
          console.log("✅ jsPDF carregado com sucesso:", typeof jsPDF);
        }

        // Verificar pdfBasell.js
        if (typeof window.generateBasellPdf !== "function") {
          console.warn(
            "pdfBasell.js não foi carregado. Os downloads de PDF podem não funcionar."
          );
        }

        console.log("Sistema de PDF Basell inicializado.");
      });
    </script>
  </body>
</html>
